<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>整股零股計算器</title>
    <link rel="manifest" href="./manifest.json">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header>
        <h1>股票交易成本計算機</h1>
    </header>

    <main>
        <div class="calculator-container">
            <label for="price">股價 (每股):</label>
            <input type="number" id="price" value="100" min="0.01">

            <label for="shares">股數 (整股:1000, 零股:1~999):</label>
            <input type="number" id="shares" value="1000" min="1">

            <label for="commissionRate">手續費率 (%):</label>
            <input type="number" id="commissionRate" value="0.1425" step="0.0001" min="0">

            <label for="minCommission">最低手續費 (元):</label>
            <input type="number" id="minCommission" value="20" min="0">
            
            <label for="discount">手續費折扣 (例如 6折輸入 0.6):</label>
            <input type="number" id="discount" value="1.0" step="0.1" min="0.1" max="1.0">

            <button onclick="calculateCost()">計算買入成本</button>

            <div class="result-box">
                <h2>計算結果 (買入)</h2>
                <p>股票價值: <span id="value">0</span> 元</p>
                <p>原始手續費: <span id="rawCommission">0</span> 元</p>
                <p>實付手續費: <span id="actualCommission">0</span> 元</p>
                <p class="total-cost">總成本: <span id="totalCost">0</span> 元</p>
            </div>
        </div>
    </main>

    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('./service-worker.js')
                    .then(reg => console.log('Service Worker 註冊成功:', reg.scope))
                    .catch(err => console.log('Service Worker 註冊失敗:', err));
            });
        }
    </script>
    <script src="app.js"></script>
</body>
</html>
