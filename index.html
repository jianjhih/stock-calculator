<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>整股零股計算器 PWA</title>
    <!-- 導入 Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* 使用 Inter 字體以獲得更現代的觀感 */
        body { font-family: 'Inter', sans-serif; }
        /* 隱藏原生數字輸入的箭頭 */
        input[type=number]::-webkit-inner-spin-button, 
        input[type=number]::-webkit-outer-spin-button { 
            -webkit-appearance: none;
            margin: 0;
        }
        input[type=number] {
            -moz-appearance: textfield;
        }
    </style>
    <!-- PWA Manifest -->
    <link rel="manifest" href="./manifest.json">
</head>
<body class="bg-gray-50 min-h-screen flex items-center justify-center p-4">

    <!-- 主容器：針對手機螢幕進行優化 -->
    <div id="app-container" class="w-full max-w-lg bg-white shadow-2xl rounded-xl p-6 sm:p-8">
        
        <header class="text-center mb-6">
            <h1 class="text-3xl font-extrabold text-indigo-700">股票交易成本計算機</h1>
            <p class="text-sm text-gray-500 mt-1">整股 (1000 股) / 零股 (1-999 股) 交易</p>
        </header>

        <!-- 輸入表單區域 -->
        <div class="space-y-4">
            <!-- 股價輸入 -->
            <div class="input-group">
                <label for="price" class="block text-sm font-medium text-gray-700 mb-1">股價 (每股):</label>
                <input type="number" id="price" value="100" min="0.01" step="0.01"
                       class="w-full p-3 border border-gray-300 rounded-lg focus:ring-indigo-500 focus:border-indigo-500 transition duration-150"
                       oninput="calculateCost()">
            </div>

            <!-- 股數輸入 -->
            <div class="input-group">
                <label for="shares" class="block text-sm font-medium text-gray-700 mb-1">股數 (1 股為單位):</label>
                <input type="number" id="shares" value="1000" min="1"
                       class="w-full p-3 border border-gray-300 rounded-lg focus:ring-indigo-500 focus:border-indigo-500 transition duration-150"
                       oninput="calculateCost()">
            </div>

            <hr class="border-gray-100 my-4">
            
            <!-- 最低手續費輸入 -->
            <div class="input-group">
                <label for="minCommission" class="block text-sm font-medium text-gray-700 mb-1">最低手續費 (元):</label>
                <input type="number" id="minCommission" value="20" min="0"
                       class="w-full p-3 border border-gray-300 rounded-lg focus:ring-indigo-500 focus:border-indigo-500 transition duration-150"
                       oninput="calculateCost()">
            </div>
            
            <!-- 手續費折扣輸入 (已設定 28 折預設值) -->
            <div class="input-group">
                <label for="discount" class="block text-sm font-medium text-gray-700 mb-1">
                    手續費折扣 (例如 6折輸入 0.6，預設 0.28):
                </label>
                <input type="number" id="discount" value="0.28" step="0.01" min="0.01" max="1.0"
                       class="w-full p-3 border border-gray-300 rounded-lg focus:ring-indigo-500 focus:border-indigo-500 transition duration-150"
                       oninput="calculateCost()">
            </div>
        </div>

        <!-- 結果顯示區域 -->
        <div class="result-box mt-8 bg-indigo-50 border-t-4 border-indigo-500 rounded-lg p-5 shadow-inner">
            <h2 class="text-xl font-bold text-indigo-700 mb-3">計算結果 (買入成本)</h2>
            <div class="space-y-2 text-gray-800">
                <p class="flex justify-between">
                    <span class="font-medium">股票價值:</span>
                    <span id="value" class="font-semibold">0</span> <span class="text-sm text-gray-500">元</span>
                </p>
                <p class="flex justify-between">
                    <span class="font-medium">原始手續費 (固定費率 0.1425%):</span>
                    <span id="rawCommission">0</span> <span class="text-sm text-gray-500">元</span>
                </p>
                <p class="flex justify-between border-t border-indigo-200 pt-2">
                    <span class="font-bold text-indigo-800">實付手續費:</span>
                    <span id="actualCommission" class="font-extrabold text-lg text-indigo-800">0</span> <span class="text-sm text-gray-500">元</span>
                </p>
            </div>
            
            <div class="total-cost mt-4 pt-4 border-t-2 border-indigo-700">
                <p class="flex justify-between items-center text-xl">
                    <span class="font-extrabold text-indigo-900">總成本:</span>
                    <span id="totalCost" class="font-extrabold text-2xl text-red-600">0</span> <span class="text-sm text-gray-500">元</span>
                </p>
            </div>
        </div>
    </div>
    
    <!-- 訊息提示框 (取代 alert) -->
    <div id="message-box" class="fixed top-0 left-1/2 -translate-x-1/2 mt-4 transition-all duration-300 transform opacity-0 scale-95 pointer-events-none">
        <div id="message-content" class="bg-red-500 text-white p-3 rounded-lg shadow-xl font-bold"></div>
    </div>
